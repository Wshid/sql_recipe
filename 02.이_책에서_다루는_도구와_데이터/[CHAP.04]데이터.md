## 04. 데이터
### 데이터의 종류
- 업무 데이터
  - 업무에 필요한 데이터
  - 서비스와 시스템을 운용하기 위한 목적으로 구축된 데이터베이스에 존재하는 데이터
  - **갱신형** 데이터
- 로그 데이터
  - 업무에 직접적으로 필요하진 않지만, 분석을 위해 추출해야 하는 데이터
  - **누적형** 데이터
    - 출력 시점의 정보를 축적, 사용자 정보가 변경되더라도 **기존 데이터를 수정하지 않음**

### 업무 데이터 개요
- 트랜잭션 데이터
  - 시스템을 통해 사용자의 행동을 기록한 데이터
  - 날짜, 시각, 마스터 데이터의 회원 ID, ...
  - 사용자 또는 운용상의 이유로 변경 또는 제거 될 수 있음
  - 이를 기반으로 리포트를 만드는 경우가 많음
- 마스터 데이터
  - 서비스와 시스템이 정의하고 있는 데이터
  - 회원과 관련된 정보도 이 곳에 저장 됨
  - **트랜잭션 데이터**와 **마스터 데이터**를 결합하여 리포트의 폭을 넓힐 수 있다.
  - 리포트 업무전에 사전 확인해야 함

### 로그 데이터 개요
- **통계 또는 분석**을 주 용도로 설계된 데이터
- **특정 태그**를 포함하여 전송된 데이터
- **특정 행동**을 서버 측에 출력한 데이터
- 파일 형식 또는 데이터베이스에 저장된 형식 등의, 형식과는 상관없이 모두 로그 데이터
  - 웹 서버의 접근 로그, 파일로써 저장된 것으로 국한되지 않음

### 업무 데이터의 특징
- 데이터의 정밀도가 높다
  - 데이터 처리중 문제 발생시,
    - **트랜잭션**과 **롤백**을 사용하여 문제 해결 가능
  - **데이터의 정합성**이 보장됨
  - 정확한 값이 필요할 경우, 업무 데이터 사용
- 갱신형 데이터
  - 매일 다양한 데이터의 추가, 갱신, 제거
  - 갱신 사례
    - 사용자가 탈퇴하는 경우, **데이터 물리적 제거**
    - 주문 취소, **플래그**를 통한 상태 변경, **데이터 논리적 제거**
    - 주소 변경, **사용자 정보 갱신**
  - 데이터를 추출하는 **시점**에 따라 데이터가 변동될 수 있음
- 다뤄야 하는 테이블의 수가 많다
  - 대부분의 서비스는 데이터베이스로 **RDB**를 사용
    - 데이터의 **확장성 배제**
    - 데이터의 **정합성** 쉽게 유지
  - 하나의 테이블로는 데이터가 **어떤 사용자의 행동**인지 등 파악 불가
  - **ER diagram**등을 통해 데이터 구조 파악 이후
    - 어려 테이블을 결합해야 전체 내용 파악 가능

### 업무 데이터 축적 방법
- 모든 데이터 변경하기
  - **날짜를 기반으로 데이터가 계속 누적되는 경우가 아니라면**
    - 데이터 전체를 **한번에 변경**하여 최신상태로 변경
  - 우편번호 마스터, 상품 카테고리 마스터 등
  - 빈번하게 변경되거나, 날짜가 경과할 때 **상태**가 변경되는 테이블일 경우
    - 모든 데이터를 한번에 변경시 항상 최신상태가 저장되므로
      - 리포트 만들기엔 편리
      - **하지만, 과거의 정보를 잃어버림**
- 모든 데이터의 스냅샷을 날짜별로 저장
  - 날짜의 경과에 따라 상태가 변경
  - 추출 시점에 따라 데이터가 다르다.
  - **데이터 용량적인 측면에선 좋지 않으나**,
    - **신뢰성 보장**이 가능(날짜별 조회가 가능하기 때문)
- 어제와의 변경사항만 누적
  - 변경/삭제 없이, **추가**만 일어나는 테이블은
    - 한번에 변경해도 상관 없지만,
  - **데이터 전송량**과 **처리 시간**을 줄여야 할경우
    - 변경 사항만 누적

### 업무 데이터 다루기
- 정확한 값을 요구할경우
  - **업무 데이터**는 **트랜잭션 기능**으로 인해 **정합성이 보장**
  - **로그 데이터**는 전송 방법에 따라 **중간 손실**이 발생할 수 있음
  - 정확한 값을 요구할 경우, **업무 데이터** 사용
- 서비스의 방문 횟수, 페이지 뷰, 사용자 유도등의 데이터분석에는 사용 불가
  - 구매 데이터를 저장하는 경우
    - 어떤 장치에서 구매했는지는 중요하지 않음
    - UserAgent를 저장하지 않는다.
  - **로그 데이터**를 사용
- 추출 시점에 따라 결과 변화 가능성 존재
  - 리포트를 만들어 제출 시
    - **추출 시점의 정보를 기반으로 작성된 리포트**로 명시

### 로그 데이터의 특징
- 시간, 사용자 엔드포인트, IP, URL, Referer, Cookie 등의 정보 저장
  - **업무 데이터**는 **서비스**와 **시스템**을 구축할 때 필요한 데이터
  - **로그 데이터**는 서비스의 처리에 **영향이 거의 없는** 데이터 저장
    - 사용자 엔드포인트, IP, URL, ...
- **추출 방법**에 따라 **데이터의 정밀도**가 다름
  - 제대로 파악하지 않고 사용시, 잘못된 판단 가능성 존재
- 과거의 데이터가 변경되지 않음
  - 출력 시점의 정보를 **추가**하면서 기록 // append

### 로그 데이터 축적 방법
- 태그, SDK를 통해, 사용자 장치에서 데이터를 전송하고 출력(**비컨 형태**)
  - **Google Analytics** 처럼 `HTML`에 특정 태그를 집어넣고 **데이터를 전송**하는 형식을 나타내는 방법
  - 웹 사이트를 개발할 때 **일반적**인 방법
  - 외부 도구를 사용해 데이터를 참조하는 경우도 많지만
    - 독자적으로 다룰 수 있게 환경을 구성하거나
    - 데이터 자체를 구매해서 분석하는 경우도 많음
  - 웹사이트에서 **javascript**이용하여 **로그 데이터**를 전송하는 경우
    - **javascript**를 해석하지 못하는 `crawler`또는 브라우저의 데이터는 **로그로 출력되지 않음**
- 서버에서 데이터를 추출하고 출력하기(**서버 형태**)
  - 클라이언트에서 별도 처리를 하지 않고, **서버에서 처리**
  - 서버에 요청이 있을 때 출력,
    - `crawler`의 접근을 확인하고, 조건을 걸지 않는 이상 무조건 출력 됨
  - `crawler`의 접근을 막는 것은 거의 불가능
  - 의도 하지 않는 로그를 **제거하는 과정**이 필요
  
### 로그 데이터 다루기
- 사이트 방문 횟수, 페이지뷰, 사용자 유도 상황을 집계하고 분석할 때 사용
- 최신 상태를 고려한 분석에는 적합하지 않음
  - 로그 출력 시점에 정보가 기록되므로, **당시 상황을 분석**할 때는 편리하나,
  - 로그 출력 이후, **데이터의 변경 내용**을 모두 고려하여 분석할때는 **데이터 가공**이 필요
    - 상품 카테고리 변경, 사용자 주소 변경 등
- 추출 결과가 변할 가능성이 적음
  - 로그데이터는 **변경/제거**되지 않음
  - **기간을 지정**하여 집계할 때, 결과가 변동되지 않음
  - **업무 데이터**의 경우 시스템에 따라 레코드 제거 가능성 존재
- 데이터의 정확도는 업무 데이터에 비해 낮음
  - 로그 추출 방법에 따라 **사용자 누락** 가능성 존재
  - `crawler`의 로그 포함 집계 가능성 존재

### 업무 데이터와 로그 데이터의 활용 가치
- 로그 데이터
  - 주로 웹사이트의 행동 기록시 활용
- 업무 데이터
  - 웹사이트 뿐 아니라, 오프라인에서의 데이터도 활용 가능
    - POS 데이터, 음식점 예약 데이터, 대응이력 데이터 등..
- 함께 활용시, 웹사이트에서의 행동이
  - 오프라인의 행동에 어떤 영향을 미치는지 파악 가능
- 예시
  - 특정 미디어 또는 광고로 유입된 사용자가
    - 오프라인에서 계약할 가능성이 높다면
      - 해당 미디어, 광고를 더 활용할 수 있음
- **웹사이트**에서 **오프라인**으로 사용자를 유도하는 서비스라면
  - 두 가지 데이터를 활용했을 때 범위가 넒어짐

### 데이터 사용 가치
- 목표 관리
  - 목표를 관리하고, 설계하고, 서비스/조직 성장 기여
  - 사용자가 지향하는 목표가 어느정도 진행되었는지 파악 가능
    - 매출, 접근 수, 사용자 수 등
- 서비스 개선
  - 사용자 행동 기반으로 경향 파악, 매출과 서비스 개선에 기여
  - 사용자 인터뷰는 **비용적/시간적**으로 좋지 않음
    - 샘플 수도 적다.
  - 다량의 데이터를 기반으로 사용자 경향 파악
    - 이를 활용하여 매출 향상과 서비스 개선에 기여
- 미래 예측
  - 과거의 경향을 기반으로 미래 행동 예측
  - 웹사이트에서, 특정 행동을 보일 때 사용자 이탈
    - 미리 파악하여 대응 가능(전조 감지)
  - **상품 추천 시스템**도 데이터를 활용한 미래 예측에 포함